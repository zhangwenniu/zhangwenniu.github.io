# 书籍章节管理指南

本文档介绍了如何使用自动章节编号系统来管理书籍章节。

## 文件命名约定

为了让系统正确识别章节顺序，请按照以下命名约定创建章节文件：

1. **主章节**：使用 `chX.md` 格式，其中 X 是章节编号，例如 `ch1.md`, `ch2.md`
2. **子章节**：使用 `chX_Y.md` 格式，其中 X 是主章节编号，Y 是子章节编号，例如 `ch1_1.md`, `ch1_2.md`
3. **更深层次的子章节**：可以继续使用下划线分隔，例如 `ch1_1_1.md`

系统会自动将文件名中的下划线转换为点，例如 `ch1_1.md` 将显示为 "第1.1章"。

## 前置信息设置

每个章节文件的前置信息（Front Matter）只需包含以下必要字段：

```yaml
---
layout: book
title: 章节标题
book_id: 书籍ID
book_title: 书籍标题
book_description: 书籍描述（仅在第一章需要）
date: 2023-01-01
---
```

系统会自动根据文件名生成章节编号，无需手动设置。

## 排序规则

系统按照以下规则确定章节顺序：

1. 首先尝试从文件名中提取章节编号进行排序
2. 如果无法从文件名中提取有效的章节编号，则按照文件路径字母顺序排序

## 自动生成的字段

系统会自动为每个章节生成以下字段：

1. `display_chapter_number`：用于显示的章节编号，例如 "1.1"
2. `previous_chapter`：上一章的URL
3. `next_chapter`：下一章的URL

这些字段会在构建时自动生成，无需手动设置。

## 插入新章节

当需要在现有章节之间插入新章节时，只需要：

1. 创建一个新的章节文件，使用适当的文件名
2. 设置正确的 `book_id` 和其他必要的前置信息

系统会自动重新计算章节顺序和导航链接，无需手动修改其他章节文件。

## 示例

假设有以下章节文件：

```
_books/
  book1/
    ch1.md       # 第1章
    ch1_1.md     # 第1.1章
    ch1_2.md     # 第1.2章
    ch2.md       # 第2章
    ch3.md       # 第3章
```

如果需要在第1章和第2章之间插入一个新章节，可以创建 `ch1_5.md`（将显示为第1.5章）。

## 注意事项

1. 保持文件命名的一致性，以确保正确的排序
2. 修改文件名后，需要重新构建网站才能看到变化 